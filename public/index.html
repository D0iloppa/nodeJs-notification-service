<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="">
    <title>Doil's DEV-TEST server</title>
    <script type="text/javascript" src="js/main.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <link rel="manifest" href="manifest.json">
    <!-- <script src="/socket.io/socket.io.js"></script> -->
    <style>

        body{font-family:"Open Sans", sans-serif;background-size:cover;}
            #waitBackground{position:absolute;background-color:rgba(0,0,0,0.4);width:100%;height:100%;}
            @media (max-width :420px) {
                body{
                    background-position:50%;
                    
                }
                .login-containerT{width:100%!important;
                
                }
                .mobile-size {
                    width:90%!important;
                    margin: 0 auto;
                    
                }
                .text-center h3 {
                    margin-top: 52px!important;
                    font-size: 20px!important;
                }
                .hpanel {
                    margin-top: 20px!important;
                    padding: 16px 0 16px 0!important;	
    
                }
                .sub_text {
                    font-size:0.8em!important;			
                }
                #loading3 {
                    width:70%!important;
                }
                .main_logo {
                    right:50%!important;
                    transform: translate(50%)!important;	
                }
                .main_logo img {
                    width: 110px!important;
                    height: auto!important;
                }
                
    
    
    
            }
            .login-containerT{max-width:none;width:560px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:99;}
    
            .login-containerT, .row, .col-md-12, .hpanel{margin:0;padding:0;}
            .panel-bodyT{text-align:center ; padding:0px 20px 10px!important ; border-radius:0;}
            
            #boxHeadLine{background:#4486d4;width:100%;height:4px;}
            #wait_value{
                color:#1e1e1e;
                font-weight:bold;
                font-size:1.2em;
                margin: 0 0 20px 0;
                
            }
            
            #loading3{display:flex;width:50%;justify-content:space-between;margin:30px auto 49px;}
            #loading3>div{width:8px;height:40px;margin-right:7px;background-color:#033074;border-radius: 3px;
                -webkit-animation:strechdelay 1.5s ease-in-out infinite;
                animation:strechdelay 1.5s ease-in-out infinite;
            }
            #loading3 .line2{
                -webkit-animation-delay:-1.4s;
                animation-delay:-1.4s;
            } #loading3 .line3{
                -webkit-animation-delay:-1.3s;
                animation-delay:-1.3s;
            }#loading3 .line4{
                -webkit-animation-delay:-1.2s;
                animation-delay:-1.2s;
            }#loading3 .line5{
                -webkit-animation-delay:-1.1s;
                animation-delay:-1.1s;
            }#loading3 .line6{
                -webkit-animation-delay:-1.0s;
                animation-delay:-1.0s;
            }#loading3 .line7{
                -webkit-animation-delay:-0.9s;
                animation-delay:-0.9s;
            }#loading3 .line8{
                -webkit-animation-delay:-0.8s;
                animation-delay:-0.8s;
            }#loading3 .line9{
                -webkit-animation-delay:-0.7s;
                animation-delay:-0.7s;
            }#loading3 .line10{
                -webkit-animation-delay:-0.6s;
                animation-delay:-0.6s;
            }#loading3 .line11{
                -webkit-animation-delay:-0.5s;
                animation-delay:-0.5s;
            }#loading3 .line12{
                -webkit-animation-delay:-0.4s;
                animation-delay:-0.4s;
            }#loading3 .line13{
                -webkit-animation-delay:-0.3s;
                animation-delay:-0.3s;
            }#loading3 .line14{
                -webkit-animation-delay:-0.2s;
                animation-delay:-0.2s;
            }#loading3 .line15{
                -webkit-animation-delay:-0.1s;
                animation-delay:-0.1s;
            }#loading3 .line16{
                -webkit-animation-delay:-0.0s;
                animation-delay:-0.0s;
            }
            
            @keyframes strechdelay{
                0%,50%,100%{
                    transform:scaleY(.7);
                }
                20%{
                    transform:scaleY(1);
                    background-color:#2d69c2;
                }
            }
        
            @-webkit-keyframes strechdelay{
                0%,50%,100%{
                    -webkit-transform:scaleY(.7);
                }
                20%{
                    -webkit-transform:scaleY(1);
                    background-color:#72a5f5;
                }
            }
        </style>
</head>
<body>
    <script src="js/sw_mng.js"></script>
    <script type="text/javascript" src="js/tracer_cookie.js"></script>
    <script>
        
        // var socket = io();

        var serverKey;
        var accessInfo;
        var isReloaded;
        
    
        document.addEventListener("DOMContentLoaded",() => {
            
            

        });

        window.addEventListener("unload", function (e) {
            
            $.ajax({
                type: "POST",
                data:{
                    id : "test"
                },
                url: "/browser-close.do"
            });

            /*
            let perfomanceStatus = window.performance.getEntriesByType("navigation")[0].type;
            */


            /*
            let performanceStatus = JSON.stringify( window.performance.getEntriesByType("navigation"));


            let dummy = new FormData(); 

            dummy.append('text','test-msg');
            dummy.append('document_status',document.visibilityState);
            dummy.append("reload_chk" , window.closed);
            dummy.append('performanceStatus',performanceStatus);
            dummy.append('id',id);


            
            window.navigator.sendBeacon("/browser-close.do",dummy); 
            */

            /*
            e.preventDefault();
            e.returnValue = '';
            */
        
        });

        
       
        



   

    </script>

    <div id="waitPage" 
        style="position: fixed;
                width: 100%;
                height: 100%;
                z-index: 9999;
                background-color: #0000007a;
        ">
        <div class="meta-info" style="display:flex;">
            <span>Public Key : </span>
            <span id="receivedPubKey"></span>
        </div>
            <!-- <hr> -->
        <div>
            <div style="display:flex;">
                <span>Access Ip : </span>
                <span id="client-ip"></span>
            </div>
            <div style="display:flex; margin-top: 5px;">
                <span id="client-cookie"></span>
            </div>
            <!-- <button style="margin-top: 5px;" id="subscribe_Btn">Subscribe</button> -->
        </div>

        <div class="login-containerT">
                <div class="row" id="isWaitPage">
                <div class="mobile-size" style="border: 4px solid #033074;width:100%;height:auto;overflow:hidden;">
                    <div class="col-md-12" style="width:100%;height:auto;background:#fff;border: 8px solid #d0dcea;">
                    <div class="main_logo" style="position:absolute;right:2%;top:12px;"> <img src="images/logo.png" style="width:90px;height:auto;margin-top: 20px;"> </div>
                        <div class="text-center" style="padding-top:20px;"></div>
                        <div class="text-center m-b-md">
                            <h3 style="font-weight:bold;font-size:22px;color:#033074;margin-top:5px;letter-spacing: -0.04em;text-align: center;">서비스 접근 대기 중입니다. </h3>
                        </div>
                    <div id="loading3" style="margin-bottom:30px;">
                        <div class="line1"></div><div class="line2"></div><div class="line3"></div><div class="line4"></div>
                        <div class="line5"></div><div class="line6"></div><div class="line7"></div><div class="line8"></div>
                        <div class="line9"></div><div class="line10"></div><div class="line11"></div><div class="line12"></div>
                    </div>
            
                    <div class="hpanel" style="width:88%;margin: 0 auto;background:#d0dcea;padding: 14px 0 14px 0;margin-top:20px;">
                        <div class="panel-bodyT" style="border:none;">
                            <div id="wait_value">고객님의 대기열을 확인중입니다.</div>
                            <div id="notice_message" class="sub_text" style="letter-spacing: -0.04em;font-weight:600;font-size:0.8em;color:#1e1e1e;padding: 0 20px 0 20px;">
                                현재 접속 사용자가 많아 대기중이며, <br> 잠시만 기다리시면 자동 접속됩니다.
                            </div>	
                        
                        </div>
                    </div>
                    <div style="text-align: center;">
                        <!-- <iframe src="https://doiloppa.chickenkiller.com"></iframe> -->
                        <button style="margin-top: 5px;" id="subscribe_Btn" onclick="subscribe_btnClick()">알림 예약</button>
                    </div>
                    
                    <div style="text-align:right;padding:10px 10px 6px;font-size:10px;opacity:0.8;">TRACER - Copyright 2018-2022 WELLCONN Corp.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    



</body>
</html>